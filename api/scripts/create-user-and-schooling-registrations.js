'use strict';

const { knex } = require('../db/knex-database-connection');
const faker = require('faker');

const nationalStudentIds = ['070208052GD', '071417773CK', '080052064KG', '080052266JJ', '070065339JK', '080107284GK', '080107468HK', '080200503GH', '070092589KG', '071661151CE', '080107360KA', '080007317CK', '071173886FJ', '080293430GG', '080407224FD', '080108023AK', '071853778DK', '080107202FE', '080107870GF', '090642752GC', '080107128DB', '080656035EH', '071516319DF', '080200504GG', '080052490FJ', '080107940KC', '080052125DF', '080052281HD', '080293452EE', '080052270JE', '080200498HC', '080108032KH', '080107294FK', '080107945JH', '080200501GK', '080107871GE', '080107470HH', '071661095JA', '080107125DE', '071928147GK', '110475932JE', '080382488FE', '090202957FK', '080555237GC', '140188427EH', '080107138CB', '080052226DB', '080238299AE', '080007131CB', '091107137BG', '080107472HF', '080107480GH', '080052295FK', '080200516FE', '071956876FC', '080107342BB', '080107109FA', '080107880FF', '080051936DA', '080107937KF', '080052292GC', '080200545CF', '080052162KF', '080052163KE', '080107897DJ', '090026381KF', '080052495FD', '080108001DB', '080191581GF', '070339982FD', '080107715CG', '080108028AE', '080052193GE', '080126322ED', '080200506GE', '130693858GC', '080107481GG', '071173810DH', '080107219DH', '080107742KG', '080200502GJ', '080695613EF', '080107922BD', '080107469HJ', '080107205FB', '080052171JG', '090026519FE', '110363299AD', '091163601AG', '080107119EA', '080427177JC', '080052491FH', '080200429EE', '080431339KB', '080052240BH', '080052265JK', '080200543CH', '091164706GF', '080107293GA', '080052188GK', '080007342AE', '121116782DH', '071173893FB', '090011575GA', '071844239HC', '090139591JE', '080527734BH', '071381742HD', '071531952BK', '070903389CC', '080107186HA', '080107366JE', '080417269KG', '070122093JA', '163005421HC', '080679861JD', '090026836CJ', '090002449GJ', '080051998GF', '090026061CH', '080051925EB', '090026659BB', '090026811FD', '090274026KB', '080052062AB', '090520375CF', '090026601GK', '090139556CC', '090674593DH', '090026812FC', '090026902FK', '090516073FK', '090026102JD', '090002500BH', '090026058DA', '090025980BB', '100057263JA', '110363288BE', '090026886HF', '090025977BE', '110880180DF', '090026789HF', '090611878KA', '090611929DK', '090026611FK', '090002429JJ', '080200433EA', '121007261EF', '090025978BD', '120877415AJ', '090611872KG', '090139551CH', '090611874KE', '090026563BA', '090611867AE', '090139555CD', '081761708HH', '080200453CA', '090139566BC', '090026900GB', '080052478HA', '080052479GK', '081924509EC', '090026200JC', '101007541BE', '090002484DD', '090026660BA', '090161951DE', '090026698GK', '080354659EE', '090521786GK', '090139361CD', '090367790CK', '090139744CJ', '090441482FH', '100286560KB', '090611876KC', '090139539DK', '090026684JD', '090026898GD', '090002486DB', '090139529EK', '090410185CD', '090026906FF', '090611870AB', '080200520FA', '090097380AD', '090611875KD', '090002436JB', '090611877KB', '090276921AK', '080052459JK', '090026751BG', '080052291GD', '100273824CD', '090026071BH', '110029330AB', '090002490CH', '090002431JG', '090002485DC', '090441501DJ', '080252343CF', '100533508AJ', '090509838JG', '090139564BE', '100911184FA', '090274007BD', '090847419GF', '090366015FJ', '090611882JG', '080200728DG', '090127943KC', '080293301AB', '090002430JH', '090589957JK', '090026875JG', '100800661KA', '090659556DK', '090139545DD', '080052279HF', '080382509DD', '080293334GF', '100982991CD', '090016644DF', '080293402KE', '090026214GJ', '080293496KH', '071688420BC', '080075578FG', '080466854HJ', '080405031BF', '080107341BC', '080051984HK', '080045879HD', '111026522GG', '071381900BC', '080417032EC', '070882407FC', '080440622CD', '080007272HE', '081255058KG', '081550546HA', '120920469CC', '160842594KA', '100412349BE', '100117524FG', '090519688DD', '100027296HE', '100027265AJ', '100027277KD', '101066786DG', '100367923BE', '100026987KC', '110356914JD', '100367935AC', '090643557DD', '100619247BH', '100026982KH', '140913545AE', '100106478EE', '100116919HK', '090026710FH', '100027020FK', '100715927EG', '110675807CK', '100027193JA', '150242714AE', '100116995AD', '100026961CB', '100026968BE', '100026967BF', '090139715FH', '100367779GB', '090026914EH', '100367736AH', '100027275KF', '100699666BB', '100286403FE', '100117006JK', '100699665BC', '100286477HH', '100026950DC', '100117241EJ', '100027246CH', '100252834GB', '100286402FF', '100286401FG', '100484801CB', '100722758AF', '100027035EE', '100026992JH', '100117400JD', '100286259AE', '090976182CB', '100367774GG', '100286710DJ', '100027013GG', '100286399FJ', '090570851JG', '100026975AH', '090002447HA', '140188425EK', '100286398FK', '100286397GA', '100116993AF', '100026969BD', '100026970BC', '100107573BG', '100497606CA', '100409184HF', '130408193GC', '100116996AC', '110873649GH', '100367778GC', '100026957CF', '140515677HF', '100643882CA', '090745083GG', '100027138DJ', '100747104AG', '150242849GD', '110475796CG', '100286480HE', '100252754EE', '183007861AC', '100286554KH', '100440996HK', '100286552AC', '100027062BH', '100117109JD', '090248099CC', '100027049DA', '100012515BE', '100286234CK', '080293424HC', '100027050CK', '100027238DF', '100199961GK', '090026380KG', '100479575AK', '100626412DA', '183007857AG', '140884916BJ', '100619221ED', '100437919FC', '100026897JF', '100157520CE', '100117058DH', '100728272CA', '090015800AG', '090139327FH', '100117034GB', '100117060DF', '100286381HG', '100027045DE', '183007585JE', '100367737AG', '100346895KA', '100440951CH', '090026596HE', '100117520GA', '090934457DG', '100620138KG', '100027136EA', '090026753BE', '100050697FA', '100286374JD', '100868150BG', '100286371JG', '140881683FA', '090139550CJ', '100027272AB', '100116981BH', '100367776GE', '090002476EB', '100130179BB', '100026980AC', '110371657JE', '183007923DH', '100286703EF', '100286738BA', '100117446DH', '100117323GD', '091030563FH', '100026920GC', '090202897CC', '100286699EK', '090611883JF', '090139725EH', '090139452CK', '100027170AG', '080028127HE', '090259160BK', '090377590CG', '080293289BD', '110859978GB', '110451456BK', '090125943FF', '100951159DK', '100951160DJ', '100289760KC', '070357076DB', '100305927CH', '080335921GB', '080417282JD', '090026257CF', '090550987GF', '090026700GH', '163008054FJ', '100116972CG', '081838080EE', '070039631KC', '100598329JA', '100586016HE', '100026939ED', '090002427KA', '110767315JK', '100361470GF', '100777111GK', '090631537CF', '110933585HH', '140755563HA', '080051971KC', '121034755AC', '090378458DB', '091151441EB', '071531936DF', '100117087AJ', '090632843HH', '101142599HH', '100026959CD', '071071598BB', '110562627BA', '110314186DE', '110517224BH', '160834767GA', '100602182BA', '110314026KH', '110338848BA', '110029299DC', '100947039JF', '110029275FG', '100117305JB', '110649641AF', '120195443HA', '150451759KB', '100619210FE', '110029280FB', '110029259HC', '100061043JD', '100274289ED', '110689306BD', '110517238AD', '120475157AH', '110625684AD', '110029245JG', '110028906DH', '110314180EA', '110174932KD', '110000135KG', '110475948GJ', '110028691FJ', '110174142BA', '110029127BA', '100207158FA', '110314010BG', '110543696CG', '110314188DC', '110029261HA', '110644006BE', '110029242JK', '110314183DH', '120195822HK', '110028922CB', '121097941GA', '110517222BK', '110174443KH', '120475056BB', '110276194AC', '110539748KE', '110517223BJ', '110314018AJ', '110093985EF', '110028662JH', '100367870GH', '110520502DH', '110029140KE', '110174133BK', '120814432DJ', '110314181DK', '110029274FH', '110029247JE', '100117333FD', '110029258HD', '110314187DD', '110830522CK', '120692025DB', '110174235BE', '100276604FG', '120195781CD', '110029216BJ', '110174155KE', '100286368JK', '100943776FA', '101132453DJ', '110029244JH', '110029282EK', '100117155DH', '110517218CD', '110475727KF', '130311354KF', '130909744AB', '110792629KC', '150845736DB', '100116954EE', '110314028KF', '110307683DJ', '110029170GE', '110174345AB', '110111283BD', '110174296FA', '110029137KH', '110174738KD', '110174094FJ', '180840167DH', '110314023AD', '110314024AC', '121098523GA', '100026977AF', '120923181CG', '100983133HF', '100515002JE', '100147747KH', '110517233AJ', '110482441HE', '110029148JG', '100286353AH', '130974123DA', '121067532BB', '110517221CA', '100922803HB', '120151233EJ', '110174448KC', '110174469HB', '110029317BE', '110314012BE', '110666739HG', '110124531FE', '120688588HD', '090002499BJ', '130486360HH', '100532935KG', '100536322AH', '100117188AE', '100197656EG', '100362172EC', '100792738FK', '100164357HE', '183045730GA', '110363428GJ', '110363375CE', '100027229EE', '090519683DJ', '090901124AB', '090139553CF', '080507868KF', '070958436HB', '173054119JK', '100117260CK', '100757529FH', '100744191AK', '071173889FF', '100286420DH', '100027365AF', '090498800GG', '183085560KH', '091132211GF', '110029217BH', '183082785FK', '130062133CG', '110174694EA', '100295390JJ', '091167331FK'];

async function main() {
  console.log('Starting creating users and reconciling...');

  try {
    const [organizationId] = await knex('organizations').returning('id').insert({ name: 'Organization', type: 'SCO', isManagingStudents: true });

    for (const nationalStudentId of nationalStudentIds) {
      const firstName = faker.name.firstName();
      const lastName = faker.name.firstName();
      const [id] = await knex('users').returning('id').insert({ firstName, lastName, email: `${nationalStudentId}@example.net`, password: '' });
      await knex('schooling-registrations').insert({ firstName, lastName, birthdate: faker.date.past(), nationalStudentId, organizationId, userId: id });
    }

    console.log('\nDone.');

  } catch (error) {
    console.error('\n', error);
    process.exit(1);
  }
}

if (require.main === module) {
  main().then(
    () => process.exit(0),
    (err) => {
      console.error(err);
      process.exit(1);
    }
  );
}
